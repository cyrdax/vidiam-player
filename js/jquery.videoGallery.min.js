(function(l){l.fn.videoGallery=function(v){var Oa,ab,bb,cb,Pa,Qa,ua;function Me(a){if(!r||u||Rb)return!1;if(!db){if(Ea){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();db=!0;fa.bind(ub,function(a){a:{var g;if(Ea){if(a.originalEvent.touches&&a.originalEvent.touches.length)g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault(); Xd(g.pageX)}});fa.bind(Ra,function(a){a:if(db){db=!1;fa.unbind(ub).unbind(Ra);var g;if(Ea){if(a.originalEvent.touches&&a.originalEvent.touches.length)g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();Xd(g.pageX)}})}return!1}function Xd(a){var f;f=a-ed.offset().left;0>f?f=0:f>ca&&(f=ca);a=Math.max(0,Math.min(1,f/ca));if("local"==s)if(Sb.css("width", f+"px"),F){if(O){a*=t.duration;a=a.toFixed(1);try{t.currentTime=a}catch(g){}}}else"undefined"!==typeof y(D)&&y(D).pb_seek(a);else if("youtube_single"==s||"youtube_playlist"==s)F?G&&(a*=G.getDuration(),a=a.toFixed(1),G.seek(a)):"undefined"!==typeof y(D)&&y(D).pb_seek(a)}function Ne(){if(!O)return!1;Tb.css("display","block");eb.bind("mousemove",Yd).bind("mouseout",vc);fa.bind("mouseout",vc)}function vc(){if(!O)return!1;Tb.css("display","none");eb.unbind("mousemove",Yd).unbind("mouseout",vc);fa.unbind("mouseout", vc)}function Yd(a){var f=a.pageX-ed.offset().left;0>f?f=0:f>ca&&(f=ca);a=parseInt(a.pageX-eb.offset().left-Tb.width()/2,10);Tb.css("left",a+"px");var f=Math.max(0,Math.min(1,f/ca)),g,k;if("local"==s)if(F)g=f*t.duration,k=t.duration;else if("undefined"!==typeof y(D))k=y(D).pb_getFlashDuration(),g=f*k;else return;else if("youtube_single"==s||"youtube_playlist"==s)if(F)g=f*G.getDuration(),k=G.getDuration();else if("undefined"!==typeof y(D))k=y(D).pb_getFlashDuration(),g=f*k;else return;Tb.find("p").html(wc(g)+ " | "+xc(k))}function yc(){L&&clearTimeout(L);va.css("display","none");Ub=!1}function Oe(a){if(!r||u||db)return!1;if(!Rb){if(Ea){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Rb=!0;fa.bind(ub,function(a){a:{var g;if(Ea){if(a.originalEvent.touches&&a.originalEvent.touches.length)g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault(); Zd(g.pageY)}}).bind(Ra,function(a){a:if(Rb){Rb=!1;fa.unbind(ub).unbind(Ra);var g;if(Ea){if(a.originalEvent.touches&&a.originalEvent.touches.length)g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();Zd(g.pageY)}})}return!1}function Zd(a){E=Math.max(0,Math.min(1,(a-fd.offset().top)/vb));E=1-E;zc()}function $d(){if(!r||u)return!1;0<E?(Ac=E,E=0):E= Ac}function zc(){ae.css("height",E*vb+"px");F?"local"==s?t&&(t.volume=E):G&&G.setVolume(E):"undefined"!==typeof y(D)&&y(D).pb_setVolume(E);0==E?m.find(".player_volume").find("i").removeClass("fa-volume-up ap_vol_on ap_vol").addClass("fa-volume-off ap_mute"):0<E&&m.find(".player_volume").find("i").removeClass("fa-volume-off ap_mute_on ap_mute").addClass("fa-volume-up ap_vol");isMobile&&Bc&&(L&&clearTimeout(L),L=setTimeout(yc,Cc))}function gd(){Bc&&L&&clearTimeout(L);Sa.css("display","block");va.bind("mousemove", be).bind("mouseout",Dc);fa.bind("mouseout",Dc)}function Dc(){Bc&&(L&&clearTimeout(L),L=setTimeout(yc,Cc));Sa.css("display","none");va.unbind("mousemove",be).unbind("mouseout",Dc);fa.unbind("mouseout",Dc)}function be(a){a=a.pageY-fd.offset().top;0>a?a=0:a>vb&&(a=vb);var f=parseInt(a-Sa.height()/2+Pe,10);Sa.css("top",f+"px");a=Math.max(0,Math.min(1,a/vb));a=parseInt(100*(1-a),10);Sa.find("p").html(a+" %")}function Qe(){var a,f,g,k,l,C=!1;H.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap", function(n){if(!r||u)return!1;if(!wb)return!0;n=n.originalEvent.touches[0];a=H.position().left;f=H.position().top;g=n.pageX;k=n.pageY;l=!1;C=!0}).bind("touchmove.ap",function(n){if(C){n=n.originalEvent.touches[0];if("horizontal"==P){var m=a-g+n.pageX,q=A.width();0<m?(m=0,Q("off")):Q("on");m<q-B?(m=q-B,$("off")):$("on");H.css("left",m+"px")}else m=f-k+n.pageY,q=A.height(),0<m?(m=0,Q("off")):Q("on"),m<q-B?(m=q-B,$("off")):$("on"),H.css("top",m+"px");l=l||5<Math.abs(g-n.pageX)||5<Math.abs(k-n.pageY); return!1}}).bind("touchend.ap",function(a){C=!1}).bind("click.ap-touchclick",function(a){if(l)return l=!1})}function Q(a){"on"==a?Vb.css("display","block"):Vb.css("display","none")}function $(a){"on"==a?Wb.css("display","block"):Wb.css("display","none")}function ce(){if("horizontal"==P){var a=A.width(),f;B>a?(Q("on"),$("on"),wb=!0,f=parseInt(H.css("left"),10),f<a-B?(K&&clearInterval(K),f=a-B):0<f&&(f=0),H.css("left",f+"px"),Q("off")):(Q("off"),$("off"),wb=!1)}else a=A.height(),B>a?(Q("on"),$("on"), wb=!0,f=parseInt(H.css("top"),10),f<a-B?(K&&clearInterval(K),f=a-B):0<f&&(f=0),H.css("top",f+"px"),Q("off")):(Q("off"),$("off"),wb=!1)}function hd(){"scroll"==Ta?"list"==q&&(Xb?"block"==R.css("display")?(xb.reinitialise(),"vertical"==P?(xb.scrollToY(0),l(".jspPane").css("top","0px")):(xb.scrollToX(0),l(".jspPane").css("left","0px"))):id=!0:(Xb=yb,Xb.jScrollPane({verticalDragMinHeight:100,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100}),xb=Xb.data("jsp"),Xb.bind("jsp-initialised", function(a,f){}),"horizontal"==P&&(isMobile||yb.bind("mousewheel",Re)))):"buttons"==Ta&&(Vb=m.find(".thumbBackward").css({cursor:"pointer",display:"none"}).bind(zb,function(){if(!r||u)return!1;K&&clearInterval(K);K=setInterval(function(){var a;"horizontal"==P?(a=parseInt(H.css("left"),10),a+=Ab,0<a?(K&&clearInterval(K),a=0,Q("off")):Q("on"),H.css("left",a+"px")):(a=parseInt(H.css("top"),10),a+=Ab,0<a?(K&&clearInterval(K),a=0,Q("off")):Q("on"),H.css("top",a+"px"));$("on")},100);return!1}).bind(Ra, function(){K&&clearInterval(K);return!1}),Wb=m.find(".thumbForward").css({cursor:"pointer",display:"none"}).bind(zb,function(){if(!r||u)return!1;K&&clearInterval(K);K=setInterval(function(){var a;"horizontal"==P?(a=parseInt(H.css("left"),10),w=A.width(),a-=Ab,a<w-B?(K&&clearInterval(K),a=w-B,$("off")):$("on"),H.css("left",a+"px")):(a=parseInt(H.css("top"),10),h=A.height(),a-=Ab,a<h-B?(K&&clearInterval(K),a=h-B,$("off")):$("on"),H.css("top",a+"px"));Q("on")},100);return!1}).bind(Ra,function(){K&&clearInterval(K); return!1}),ce(),isMobile||yb.bind("mousewheel",function(a,f,g,k){if(!r||u)return!1;a=0<f?1:-1;g="vertical"==P?A.height():A.width();if("horizontal"==P){if(B<g)return!1;f=parseInt(H.css("left"),10);f+=Ab*a;0<f?f=0:f<g-B&&(f=g-B);H.css("left",f+"px")}else{if(B<g)return!1;f=parseInt(H.css("top"),10);f+=Ab*a;0<f?f=0:f<g-B&&(f=g-B);H.css("top",f+"px")}0==f?(Q("off"),$("on")):f<=g-B?($("off"),Q("on")):(Q("on"),$("on"),wb=!0);return!1}))}function Re(a,f,g,k){if(!r||u)return!1;xb&&xb.scrollByX(100*(0<f?-1: 1));return!1}function Se(){u||(Yb&&clearInterval(Yb),Fa&&clearTimeout(Fa),Ec(jd))}function Te(){Fa&&clearTimeout(Fa);Ec(jd)}function de(a){var f=a.length,g="",k=0,l,m;for(k;k<f;k++)if(l=a.charAt(k).toLowerCase(),"\\"==l&&(l="/"),m=l.charCodeAt(0),97<=m&&122>=m||48<=m&&57>=m||0<="_-".indexOf(l))g+=l;return g}function Ec(a){a.stopPropagation();kd||(kd=!0);wa=a.value;"/"==wa.charAt(0)&&(wa=wa.substring(1));"/"==wa.charAt(wa.length-1)&&(wa=wa.substring(0,wa.length-1));a=wa;var f;0<a.indexOf("/")?(ld= !0,md=f=a.substr(0,a.indexOf("/")),Zb=a.substr(a.indexOf("/")+1)):(md=a,ld=!1,Zb=null,f=a);a=de(f);f=!1;var g=0;for(g;g<Ue;g++)if(xa[g].categoryName==a){qa=g;aa=xa[g].id;f=!0;break}if(!f)return alert("404 page not found, check your deeplinks first level!"),l.address.history(!1),!1;fb=!1;void 0==nd||nd!=qa?gb():Zb?ee(Zb)?z.getCounter()!=$b?(fb=!0,-1!=z.getCounter()&&Ua(),z.setCounter($b,!1)):(Fc(),od()):(alert("404 page not found, check your deeplinks second level!"),l.address.history(!1)):fe()}function ee(a){var f= !1,g=0,k=xa[qa].mediaName,l=k.length;for(g;g<l;g++)if(k[g]==a){$b=g;f=!0;break}return f?!0:!1}function Ve(a){return xa[qa].categoryName+"/"+xa[qa].mediaName[a]}function gb(){u=!0;ba.length&&ba.css("display","block");N&&clearInterval(N);ac&&(pd(),Ga.html("").css("display","none"),U&&da(),ge.empty());if("wall"==q){var a=0,f=ja.length;for(a;a<f;a++)ja[a]&&ja[a].remove();ja=[];S&&(S=null);Bb=!1}Gc=Cb=!1;p=0;bc=-1;qd=0;hb=[];cc=[];z.reSetCounter();ib=[];J=[];Ha=[];Db=[];Hc=[];Ic=[];ka=[];jb=!1;B=0;"wall"!= q&&"buttons"==Ta&&("horizontal"==P?H.css("left","0px"):H.css("top","0px"),Vb&&Vb.css("display","none"),Wb&&Wb.css("display","none"));if(0==Va.find("div[id="+aa+"]").length)return la(aa)?(alert("Active playlist is set to none, so no playlist have been loaded."),ga()):alert("Failed playlist selection! No playlist with id: "+aa),u=!1;if(0==Va.find("div[id="+aa+"]").find("div[class='playlistNonSelected']").length)return alert("Playlist is empty. Quitting."),ga(),u=!1;if("xml"==Va.find("div[id="+aa+"]").find("div[class='playlistNonSelected']").eq(0).attr("data-type").toLowerCase())Eb= l(Va.find("div[id="+aa+"]")).find("div[class='playlistNonSelected']").eq(0),ua=Qa=Pa=cb=bb=ab=Oa=void 0,V&&(Oa=Eb.attr("data-address")),Ia=Eb,a=Eb.attr("data-mp4Path"),We(a);else if("folder"==Va.find("div[id="+aa+"]").find("div[class='playlistNonSelected']").eq(0).attr("data-type").toLowerCase())Jc=[],l(Va.find("div[id="+aa+"]")).find("div[class='playlistNonSelected']").each(function(){Jc.push(l(this))}),Fb=Jc.length,Fb--,-1<Fb?he():gb();else{a=Va.find("div[id="+aa+"]").clone().appendTo(ge);if(0== a.length)return alert("Failed playlist selection 2! No playlist with id: "+aa),u=!1;nd=qa;Kc=[];V&&(Lc=!1,V||qa||(qa=a.index()),xa[qa].mediaName||(Lc=!0,xa[qa].mediaName=[]));ac=a;cc=a.find("div[class='playlistNonSelected']");a=l("<div/>").addClass("playlistNonSelected").css("opacity",0).appendTo(R);Mc=parseInt(a.css("marginBottom"),10);Nc=parseInt(a.css("marginRight"),10);Gb=a.outerWidth(!0);Hb=a.outerHeight(!0);a.remove();a=null;a=l("<div/>").addClass("playlistThumb").css("opacity",0).appendTo(R); Ib=a.width();Jb=a.height();a.remove();a=null;qd=cc.length;ga()}}function ga(){bc++;if(bc<qd)hb=[],Xe();else{if(!ie)if(ie=!0,ha=l("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:"-10000px"}).bind("click",function(){a:if(r&&!u){var a=je;if("wall"!=q){if(a==z.getCounter())break a;U&&da();Ua();z.processPlaylistRequest(a)}itemTriggered(a)}return!1}).appendTo(A).bind("mouseleave",Wa),F)l(D).remove(),Kb.remove(),"wall"!=q&&Ga.css("display","block");else{dc.remove();ia.remove(); Ga.remove();"wall"!=q?(ha.unbind("mouseleave",Wa),"undefined"!==typeof y(D)?(l(D).css("display","block"),kb=setInterval(Ye,rd)):ga()):U&&"undefined"!==typeof y(ma)?(l(ma).css("display","block"),kb=setInterval(ke,rd)):ga();return}p=J.length;l(".playlistInfo").dotdotdot();z.setPlaylistItems(p);if("wall"!=q&&0<p){"list"==q&&("vertical"==P?J[p-1].css("marginBottom","0px"):J[p-1].css("marginRight","0px"));var a=B=0,f;for(a;a<p;a++)f=l(J[a]),B="horizontal"==P?B+f.outerWidth(!0):B+f.outerHeight(!0);"buttons"== Ta?"horizontal"==P&&yb.width(B):"scroll"==Ta&&"horizontal"==P&&ac.width(B)}"wall"!=q?hd():"wall"==q&&Gc&&jQuery("a[data-rel^='prettyPhoto']").prettyPhoto({theme:"pp_default",deeplinking:!1,changepicturecallback:function(){isMobile||(-1!=W?itemTriggered(W):-1!=X&&itemTriggered(X),da())},callback:function(){}});ba.length&&ba.css("display","none");u=!1;if(!r){r=!0;sd();if("wall"==q&&isMobile)fa.on("click","a[data-apNumToReturn]",function(){if(void 0!=l(this).attr("data-apNumToReturn")){var a=parseInt(l(this).attr("data-apNumToReturn"), 10);itemTriggered(a)}});"wall"!=q&&(le?ec.bind("mouseenter",Ze).bind("mouseleave",$e):Ja());U&&!Oc&&R.bind("mouseleave",af);videoGallerySetupDone()}if("wall"!=q){if(V){if(ld){if(!ee(Zb)){alert("404 page not found, check your deeplinks second level!");l.address.history(!1);return}fb=!0;z.setCounter($b,!1)}}else a=v.activeItem,a>p-1&&(a=p-1),-1<a&&z.setCounter(a,!1);td()}}}function Xe(){var a,f,g,k;a=l(cc[bc]);g=a.attr("data-type");"local"==g?(f={type:"local"},f.mp4Path=a.attr("data-mp4Path"),f.ogvPath= a.attr("data-ogvPath"),void 0==a.attr("data-webmPath")||la(a.attr("data-webmPath"))||(f.webmPath=a.attr("data-webmPath")),f._item=a,g=a.find("div[class='playlistThumb']"),f.thumb=g,f.thumbImg=g.find("img[class='thumb']"),V&&(f.deeplink=a.attr("data-address")),hb.push(f),ud()):"youtube_single"==g?(f=a.attr("data-mp4Path"),f="http://gdata.youtube.com/feeds/api/videos/"+f+"?v=2&format=5&alt=jsonc",ua=Qa=Pa=cb=bb=ab=Oa=void 0,k=a.attr("data-address"),V&&"undefined"!==typeof k&&!1!==k&&(Oa=k),k=a.attr("data-link"), "undefined"!==typeof k&&!1!==k&&(ab=k),k=a.attr("data-hook"),"undefined"!==typeof k&&!1!==k&&(bb=k),k=a.attr("data-target"),"undefined"!==typeof k&&!1!==k&&(cb=k),k=a.attr("data-description"),"undefined"!==typeof k&&!1!==k&&(Pa=k),0<a.find(".playlistTitle").length&&(Qa=a.find(".playlistTitle").html()),0<a.find(".thumb").length&&(ua=a.find(".thumb").attr("src")),vd(g,f)):"youtube_playlist"==g?(f=a.attr("data-mp4Path"),a.attr("data-mp4Path").substr(0,2).toUpperCase(),wd=f,fc=1,f="http://gdata.youtube.com/feeds/api/playlists/"+ wd+"?start-index="+fc+"&max-results=50&v=2&format=5&alt=jsonc",ua=Qa=Pa=cb=bb=ab=Oa=void 0,k=a.attr("data-address"),V&&"undefined"!==typeof k&&!1!==k&&(Oa=k),k=a.attr("data-link"),"undefined"!==typeof k&&!1!==k&&(ab=k),k=a.attr("data-hook"),"undefined"!==typeof k&&!1!==k&&(bb=k),k=a.attr("data-target"),"undefined"!==typeof k&&!1!==k&&(cb=k),Ia=a,a.css("display","none"),vd(g,f)):(alert('Wrong data-type in playlist! Playlist node data-type cannot be: "'+g+'" . Quitting.'),"xml"!=g&&"folder"!=g||alert("You CANNOT mix XML or FOLDER playlist with other playlist types (local videos, youtube single videos, youtube playlists). Quitting."))} function We(a){a=a+"?rand="+99999999*Math.random();l.ajax({type:"GET",url:a,dataType:"html",cache:!1}).done(function(a){var g,k,m,C,n;l(a).find("div[class='playlistNonSelected']").each(function(){g=l(this);n=l("<div>").append(g.clone()).html();n=n.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\<br\>\<br\>/g,"<br/>");k=document.createElement("ul");k.innerHTML=n;m=k.firstChild;C=l(m);Ia.after(C);Ia=C});Eb&&Eb.remove();gb()}).fail(function(a,g,k){alert("XML process error: "+a.responseText);ga()})} function he(){var a=Jc[Fb],f=a.attr("data-mp4Path"),g=a.attr("data-address"),k=!1;"undefined"!==typeof a.attr("data-subdirs")&&!1!==a.attr("data-subdirs")&&(k=!0);Ia=a;f="wall"==q?f+bf:f+Ka;f=f.replace(/\/\//g,"/");jQuery.ajax({type:"GET",url:hap_source_path+"folder_parser.php",data:{dir:f,sub_dirs:k},dataType:"json"}).done(function(f){var k,n,x,r,u,s,t,v,y=0,A=f.length;if(0==A)alert("Folder process failed! No media found.");else{n="list"==q?l('<div class="playlistThumb thumb"/>').appendTo(m):l('<div class="playlistThumb thumb"/>').appendTo(na); n.width();n.height();n.remove();for(y;y<A;y++)n=f[y],n=n.path,n.indexOf("\\")&&(n=n.replace(/\\/g,"/")),x=n,k=n.substr(0,n.lastIndexOf("."))+".ogv",r=n.substr(0,n.lastIndexOf("."))+".webm",u=n.substr(0,n.lastIndexOf("."))+".jpg",s=n,t=n.substr(0,n.lastIndexOf("."))+".ogv",v=n.substr(0,n.lastIndexOf("."))+".webm",n=n.substr(0,n.lastIndexOf("."))+".jpg",s.replace(Ka,Xa),t.replace(Ka,Xa),v.replace(Ka,Xa),n=n.replace(Ka,Xa),k=l("<div/>").addClass("playlistNonSelected").attr({"data-id":p-1,"data-type":"local", "data-mp4Path":x,"data-ogvPath":k,"data-webmPath":r,"data-imagePath":u}),x=x.substr(0,x.lastIndexOf(".")),x=x.indexOf("/")?x.substr(x.lastIndexOf("/")+1):x,x=x.split("_").join(" "),l('<div class="playlistThumb"><img class="thumb" src="'+n+'" alt="'+x+'"/></div>').appendTo(k),l('<div class="playlistInfo"><p><span class="playlistTitle">'+x+"</span></p></div>").appendTo(k),Ia.after(k),Ia=k,V&&k.attr("data-address",g+(y+1).toString());a.remove();Fb--; -1<Fb?he():gb()}}).fail(function(a,f,g){alert("Folder process error: "+ a.responseText);alert("Make sure you are running this online or on local server, not offline!");ga()})}function vd(a,f){jQuery.ajax({url:f,dataType:"jsonp",success:function(f){if("youtube_single"==a){var k={};(f=f.data)?f.accessControl?(k.type="youtube_single",V&&(k.deeplink=Oa),k.id=f.id,k.title=Qa?Qa:f.title?f.title:"",k.description=Pa?Pa:f.description?f.description:"",k.thumbnail=!ua&&f.thumbnail?f.thumbnail.sqDefault?f.thumbnail.sqDefault:f.thumbnail.hqDefault:ua?ua:"",hb.push(k),ud()):ga():ga()}else if(f.error)alert(f.error.message), ga();else if(f.data.items){var k=f.data.items.length,l=0,m;for(l;l<k;l++)(m=f.data.items[l].video)&&m.accessControl&&(obj={type:"youtube_playlist"},V&&(obj.deeplink=Oa+(l+1).toString()),obj.id=m.id,obj.title=Qa?Qa:m.title?m.title:"",obj.description=Pa?Pa:m.description?m.description:"",obj.thumbnail=!ua&&m.thumbnail?m.thumbnail.sqDefault?m.thumbnail.sqDefault:m.thumbnail.hqDefault:ua?ua:"",hb.push(obj));fc+=cf;vd("youtube_playlist","http://gdata.youtube.com/feeds/api/playlists/"+wd+"?start-index="+ fc+"&max-results=50&v=2&format=5&alt=jsonc")}else ud()},error:function(a){ga()}})}function ud(){var a=hb.length,f=0,g,k,m,C,n,x,r,u;if(Lc){xd=df+ef+md+"/";var y=xa[qa].mediaName}for(f;f<a;f++){k=hb[f];m=k.type;p+=1;x=p-1;if("local"==m){J.push(k._item);void 0==k._item.attr("data-orig-type")||la(k._item.attr("data-orig-type"))||(Pc||k.thumb&&k.thumb.remove(),me||(k._item.find(".playlistInfo").length&&k._item.find(".playlistInfo").remove(),k._item.attr("data-description","")),k._item.attr("data-type", k._item.attr("data-orig-type")));void 0==k._item.attr("data-description")||la(k._item.attr("data-description"))||(ib[p-1]=k._item.attr("data-description"));k.thumb&&(n=k.thumb,Ha.push(n),n=k.thumbImg,Db.push(n),n.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}));n=l("<div/>").css({position:"absolute",width:Gb+"px",height:Hb+"px",top:"0px",left:"0px",background:"#ad4",cursor:"pointer",opacity:0}).attr("dataTitle","hitdiv");if("wall"!=q)n.appendTo(k._item),ka[p-1]=n,k._item.bind("click", Qc).attr("data-id",p-1);else{var s;void 0!=k._item.attr("data-link")&&(s=k._item.attr("data-link"));var t;void 0!=k._item.attr("data-hook")&&(t=k._item.attr("data-hook"));var v="";void 0!=k._item.attr("data-description")&&(v=k._item.attr("data-description"));C="";k._item.find("span[class='playlistTitle']").length&&(C=k._item.find("span[class='playlistTitle']").html());void 0!=t&&void 0!=s?(Gc=!0,F?(x=l('<a href="'+s+'" data-rel="'+t+'" title="'+v+'" />').appendTo(k._item),l('<img src="" alt="'+C+ '"/>').css("display","none").appendTo(x),n.appendTo(x),isMobile&&n.bind("click",function(){itemTriggered(l(this).attr("data-id"))}).attr("data-id",p-1)):(m=l("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:"-10000px"}),x=l('<a href="'+s+'" data-rel="'+t+'" title="'+v+'"/>').data("yt_blocker",m).appendTo(A),l('<img src="" alt="'+C+'"/>').css("display","none").appendTo(x),ja[p-1]=x,m.appendTo(x),isMobile||m.bind("mouseleave",Wa).attr("data-id",p-1),ka[p-1]=m)):void 0!= s?(C="_blank",void 0==k._item.attr("data-target")||la(k._item.attr("data-target"))||(C=k._item.attr("data-target")),F?(x=l('<a href="'+s+'" target="'+C+'" data-apNumToReturn="'+x+'"/>').appendTo(k._item),n.appendTo(x),isMobile||n.bind("click",function(){-1!=W?itemTriggered(W):-1!=X&&itemTriggered(X)}).attr("data-id",p-1)):(m=l("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:"-10000px"}),x=l('<a href="'+s+'" target="'+C+'"/>').data("yt_blocker",m).appendTo(A),ja[p-1]= x,m.appendTo(x),isMobile||m.bind("mouseleave",Wa).attr("data-id",p-1),ka[p-1]=m,isMobile||m.bind("click",function(){-1!=W?itemTriggered(W):-1!=X&&itemTriggered(X)}).attr("data-id",p-1))):(n.appendTo(k._item),ka[p-1]=n,k._item.bind("click",Qc).data("no_action","true").attr("data-id",p-1))}isMobile||(F?k._item.bind("mouseenter",yd).bind("mouseleave",Wa).attr("data-id",p-1):k._item.bind("mouseenter",yd).attr("data-id",p-1));U&&(x=l("<div/>").addClass("thumb_vid").attr({dataTitle:"videoDiv"}).appendTo(l(Ha[p- 1])),Ic[p-1]=x,x=l(new Image).attr("data-id",p-1).addClass("thumbPreloader").load(function(){}).error(function(a){}).attr({src:ne,dataTitle:"thumbPreloader"}).appendTo(Ha[p-1]),Hc[p-1]=x)}else if("youtube_single"==m||"youtube_playlist"==m){"youtube_single"==m?g=l(cc[bc]):"youtube_playlist"==m&&(g=l("<li/>").addClass("playlistNonSelected").attr({"data-id":p-1,"data-type":k.type,"data-mp4Path":k.id}),Ia.after(g),Ia=g,V&&g.attr("data-address",k.deeplink));J.push(g);if(Pc)0<g.find(".playlistThumb").length&& g.find(".playlistThumb").remove(),n=C=l("<div/>").addClass("playlistThumb").appendTo(g),Ha.push(n),k.thumbnail?(n=l(new Image).css("opacity",0).attr("data-id",p-1).load(function(){l(this).addClass("thumb_yt").stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}).error(function(a){}).attr({src:k.thumbnail}).appendTo(n),Db.push(n)):Db.push("");else if(n=g.find("div[class='playlistThumb']"))if(Ha.push(n),n=n.find("img[class='thumb']"))n.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}), Db.push(n);"wall"!=q&&(me?(C=k.title?k.title:"",n=k.description?k.description:"","list"==q&&(u=l('<p><span class="playlistTitle">'+C+'</span><br><span class="playlistContent">'+n+"</span></p>")),0==g.find(".playlistTitle").length?C=l("<div/>").html(u).addClass("playlistInfo").appendTo(g):"list"==q?(g.find(".playlistTitle").html(C),g.find(".playlistContent").html(n)):g.find(".playlistTitle").html(C),g.attr("data-description",n),ib[p-1]=n):void 0==g.attr("data-description")||la(g.attr("data-description"))|| (ib[p-1]=g.attr("data-description")));n=l("<div/>").css({position:"absolute",width:Gb+"px",height:Hb+"px",top:"0px",left:"0px",background:"#ad4",cursor:"pointer",opacity:0}).attr("dataTitle","hitdiv");if("wall"!=q)n.appendTo(g),ka[p-1]=n,g.bind("click",Qc).attr("data-id",p-1);else{s=ab?ab:void 0;t=bb?bb:void 0;"youtube_playlist"==m&&void 0!=t&&(s="id");v=k.description?k.description:"";70<v.length&&(v=v.substring(0,70)+"...");C=k.title?k.title:"";30<C.length&&(C=C.substring(0,30)+"...");var z=A,B= -1E4;void 0!=t&&void 0!=s?(U||(z=g,B=0),Gc=!0,"youtube_playlist"==m&&(s="http://www.youtube.com/watch?v="+k.id),m=l("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:B+"px"}),x=l('<a href="'+s+'" data-rel="'+t+'" title="'+v+'"/>').data("yt_blocker",m).appendTo(z),l('<img src="" alt="'+C+'"/>').css("display","none").appendTo(x),ja[p-1]=x,m.appendTo(x),isMobile?m.bind("click",function(){itemTriggered(l(this).attr("data-id"))}).attr("data-id",p-1):m.bind("mouseleave",Wa).attr("data-id", p-1),ka[p-1]=m):void 0!=s?(U||(z=g,B=0),C="_blank",cb&&(C=cb),m=l("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:B+"px"}),x=l('<a href="'+s+'" target="'+C+'" data-apNumToReturn="'+x+'"/>').data("yt_blocker",m).appendTo(z),ja[p-1]=x,m.appendTo(x),isMobile||m.bind("mouseleave",Wa).attr("data-id",p-1),ka[p-1]=m,isMobile||m.bind("click",function(){-1!=W?itemTriggered(W):-1!=X&&itemTriggered(X)}).attr("data-id",p-1)):(n.appendTo(g),ka[p-1]=n,g.bind("click",Qc).data("no_action", "true").attr("data-id",p-1))}isMobile||g.bind("mouseenter",yd).bind("mouseleave",Wa).attr("data-id",p-1);U&&(x=l("<div/>").addClass("thumb_vid").attr({dataTitle:"videoDiv"}).appendTo(l(Ha[p-1])),Ic[p-1]=x,x=l(new Image).attr("data-id",p-1).addClass("thumbPreloader").load(function(){}).error(function(a){}).attr({src:ne,dataTitle:"thumbPreloader"}).appendTo(Ha[p-1]),Hc[p-1]=x)}V&&Lc&&(x=de(k.deeplink),y.push(x));"local"==k.type?(Lb?r=k.mp4Path:zd?r=k.ogvPath:Ad&&k.webmPath&&(r=k.webmPath),x=r.lastIndexOf("/")? r.substr(r.lastIndexOf("/")+1):r,Kc.push({id:p,name:x,type:k.type,"video-id":r,deeplink:V?xd+k.deeplink:"undefined"})):(g.attr("data-title",k.title?k.title:""),Kc.push({id:p,name:k.title?k.title:"",type:k.type,"video-id":k.id,deeplink:V?xd+k.deeplink:"undefined"}))}ga()}function lb(a){if(!r||u)return!1;void 0===a&&("block"==R.css("display")?a="off":"on");"list"==q&&("off"==a?(R.css("display","none"),mb=!1):(R.css("display","block"),mb=!0,id&&(hd(),id=!1)))}function gc(){if(ra){var a=parseInt(ra.css("borderLeftWidth"), 10),f=parseInt(ra.css("marginLeft"),10),g=parseInt(ra.css("paddingLeft"),10),k=parseInt(A.css("borderLeftWidth"),10),l=parseInt(A.css("marginLeft"),10),m=parseInt(A.css("paddingLeft"),10),n=parseInt(ra.css("borderTopWidth"),10),p=parseInt(ra.css("marginTop"),10),r=parseInt(ra.css("paddingTop"),10),s=parseInt(A.css("borderTopWidth"),10),t=parseInt(A.css("marginTop"),10),u=parseInt(A.css("paddingTop"),10);if(!ra.offset())return!1;a=parseInt(ra.offset().left,10)-parseInt(A.offset().left,10)+a+f+g+k+ l+m;n=parseInt(ra.offset().top,10)-parseInt(A.offset().top,10)+n+p+r+s+t+u;if("local"==ya)Mb&&ha&&ha.css({left:a+"px",top:n+"px"}),S&&S.css({left:a+"px",top:n+"px"}),Kb.css({left:a+"px",top:n+"px"});else if("youtube_single"==ya||"youtube_playlist"==ya)F?"wall"==q?(Mb&&ha&&ha.css({left:a+"px",top:n+"px"}),S&&S.css({left:a+"px",top:n+"px"}),Bb&&ia.css({left:a+"px",top:n+"px"})):(ha&&ha.css({left:a+"px",top:n+"px"}),ia.css({left:a+"px",top:n+"px"})):(Mb&&ha&&ha.css({left:a+"px",top:n+"px"}),S&&S.css({left:a+ "px",top:n+"px"}),Kb.css({left:a+"px",top:n+"px"}))}}function yd(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=l(a.currentTarget);var f=a.attr("data-orig-type");if(U&&"undefined"!==typeof f&&!1!==f&&"youtube_single"==a.attr("data-orig-type")&&!Pc)return!1;f=parseInt(a.attr("data-id"),10);if(f==z.getCounter()||f==W)return!1;X=W=f;"wall"==q&&(Mb=!1,a.data("no_action")&&(Mb=!0));ya=a.attr("data-type");"wall"!=q&&a.removeClass("playlistNonSelected").addClass("playlistSelected"); if(U){je=f;ra=l(Ha[f]);sa=l(ka[f]);Bd=l(Db[f]).stop().animate({opacity:0},{duration:500,easing:"easeOutSine"});ta=l(Hc[f]).css("display","block");hc=l(Ic[f]);var g=!1;if(Lb)La=l(J[f]).attr("data-mp4Path").replace(Ka,Xa);else if(!Rc&&zd&&void 0!=l(J[f]).attr("data-ogvPath"))La=l(J[f]).attr("data-ogvPath").replace(Ka,Xa),g=!0;else if(Rc&&Ad&&void 0!=l(J[f]).attr("data-webmPath"))La=l(J[f]).attr("data-webmPath").replace(Ka,Xa);else return alert("No supported video format found for preview video. Quitting."), !1;F?"local"==ya?(a=""+('<video class="preview_video_cont" width="'+Ib+'" height="'+Jb+'" preload="auto" >'),a+='<source src="'+La+'" />',a+="</video>",isAndroid||(f=Lb?'type="video/mp4"':g?'type="video/ogg"':'type="video/webm"',g=a.match(/\/\>/),a=a.slice(0,g.index)+f+a.slice(g.index)),hc.html(a),nb=hc.find(".preview_video_cont"),ic=nb[0],nb.bind("ended",oe).bind("canplaythrough",Cd).bind("canplay",Dd)):(Ya=l(J[f]).attr("data-mp4Path"),isIE&&ia.css({left:"-10000px",width:"600px",height:"400px"}), "wall"==q&&(S&&S.css("left","-10000px"),ja[f]&&(S=ja[f].data("yt_blocker")),N&&clearInterval(N),N=setInterval(gc,jc)),ff()):("wall"==q&&(S&&S.css("left","-10000px"),ja[f]&&(S=ja[f].data("yt_blocker")),N&&clearInterval(N),N=setInterval(gc,jc)),La=l(J[f]).attr("data-mp4Path"),La=La.replace(Ka,Xa),"local"==ya?"undefined"!==typeof y(ma)&&y(ma).pb_play(La,2,Ib,Jb,"local"):"undefined"!==typeof y(ma)&&y(ma).pb_play(La,2,Ib,Jb,"youtube"))}return!1}function oe(){try{ic.currentTime=0}catch(a){}ic.play()}function Cd(){pe()} function Dd(){pe()}function pe(){nb&&nb.unbind("canplaythrough",Cd).unbind("canplay",Dd);ta&&ta.css("display","none");ic&&ic.play()}function da(){N&&clearInterval(N);F?"local"==ya?(nb&&nb.unbind("ended",oe).unbind("canplaythrough",Cd).unbind("canplay",Dd).find("source").attr("src",""),hc&&hc.html("")):(ia&&ia.css("left","-10000px"),isIE?I&&I.clean():I&&I.stop(),S&&S.css("left","-10000px"),ha&&ha.css("left","-10000px"),Bb=!1):("undefined"!==typeof y(ma)&&y(ma).pb_dispose(),Kb.css("left","-10000px"), S&&S.css("left","-10000px"),ha&&ha.css("left","-10000px"),Bb=!1);ta&&ta.css("display","none");Bd&&Bd.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"});if(isIE&&ieBelow9&&"wall"!=q){var a=z.getCounter(),f=0,g;for(f;f<p;f++)f!=a&&(g=l(J[f]))&&g.removeClass("playlistSelected").addClass("playlistNonSelected")}W=-1}function Wa(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var f=l(a.currentTarget);if(f.attr("data-id")==z.getCounter())return!1; if(U)if("local"==ya){if(!F)if("wall"!=q){if(sa){var g=parseInt(sa.offset().left,10)-parseInt(A.offset().left,10),k=parseInt(sa.offset().top,10)-parseInt(A.offset().top,10),m=a.pageX-parseInt(A.offset().left,10),p=a.pageY-parseInt(A.offset().top,10);if(m>g&&m<g+Gb-Nc&&p>k&&p<k+Hb-Mc)return!1}}else if(!Mb&&sa&&(g=parseInt(sa.offset().left,10)-parseInt(A.offset().left,10),k=parseInt(sa.offset().top,10)-parseInt(A.offset().top,10),m=a.pageX-parseInt(A.offset().left,10),p=a.pageY-parseInt(A.offset().top, 10),m>g&&m<g+Gb-Nc&&p>k&&p<k+Hb-Mc))return!1;da()}else if("youtube_single"==ya||"youtube_playlist"==ya)if(sa&&sa.offset())if(g=parseInt(sa.offset().left,10)-parseInt(A.offset().left,10),k=parseInt(sa.offset().top,10)-parseInt(A.offset().top,10),m=a.pageX-parseInt(A.offset().left,10),p=a.pageY-parseInt(A.offset().top,10),m>g&&m<g+Gb-Nc&&p>k&&p<k+Hb-Mc)if("wall"!=q)if(a.pageX<=parseInt(A.offset().left,10)||a.pageY<=parseInt(A.offset().top,10)||a.pageX>=parseInt(A.offset().left,10)+R.width()||a.pageY>= parseInt(A.offset().top,10)+R.height())da();else return!1;else return!1;else da();else da();"wall"!=q&&f.removeClass("playlistSelected").addClass("playlistNonSelected");W=-1;return!1}function Qc(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();W=a=l(a.currentTarget).attr("data-id");if("wall"!=q){if(a==z.getCounter())return!1;U&&da();Ua();z.processPlaylistRequest(a)}itemTriggered(a);return!1}function Ua(){if("wall"==q)return!1;if(-1!= z.getCounter()){var a=z.getCounter(),f=l(J[a]);f&&f.removeClass("playlistSelected").addClass("playlistNonSelected");"list"==q&&(a=ka[a])&&a.css("cursor","pointer")}}function Fc(){if("wall"==q)return!1;var a=z.getCounter(),f=l(J[a]);f&&f.removeClass("playlistNonSelected").addClass("playlistSelected");"list"==q&&(a=ka[a])&&a.css("cursor","default")}function gf(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=l(a.currentTarget).attr("class"); if("player_toggleControl"==a)Nb();else if("player_volume"==a)isMobile?Bc?(L&&clearTimeout(L),Ub?(va.css("display","none"),Ub=!1):(va.css("display","block"),Ub=!0,L=setTimeout(yc,Cc))):($d(),zc()):($d(),zc());else if("playlist_toggle"==a)"list"==q&&(lb(),Ob=mb);else if("info_toggle"==a)Ed();else if("ap_share_btn"==a)hf.toggle();else if("player_fullscreen"==a){Fd=0;ea="normal"==ea?"fullscreen":"normal";qe();if(Sc||F)a=document.documentElement,a.requestFullscreen?document.fullscreenElement?document.exitFullscreen(): a.requestFullscreen():a.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():a.webkitRequestFullScreen():a.mozRequestFullScreen&&(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreenElement?document.mozCancelFullScreen():a.mozRequestFullScreen());Sc?"normal"==ea&&Tc():(za&&oa&&captionator.setRedraw(!1),Tc())}else"player_prev"==a?r&&(Ua(),z.advanceHandler(-1,!0)):"player_next"==a?Uc():"caption_btn"==a&&jf();return!1}function kf(a){if(!r|| u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var f=l(a.currentTarget);a=f.attr("class");f=f.find("i");"player_toggleControl"==a?kc?f.removeClass("ap_pause").addClass("ap_pause_on"):f.removeClass("ap_play").addClass("ap_play_on"):"player_volume"==a?0==E?f.removeClass("ap_mute").addClass("ap_mute_on"):f.removeClass("ap_vol").addClass("ap_vol_on"):"playlist_toggle"==a?f.removeClass("ap_pl_tog").addClass("ap_pl_tog_on"):"info_toggle"==a?f.removeClass("ap_pl_info").addClass("ap_pl_info_on"): "ap_share_btn"==a?f.removeClass("ap_pl_share").addClass("ap_pl_share_on"):"player_fullscreen"==a?"normal"==ea?f.removeClass("ap_fs_ent").addClass("ap_fs_ent_on"):f.removeClass("ap_fs_exit").addClass("ap_fs_exit_on"):"caption_btn"==a&&f.removeClass("ap_cc").addClass("ap_cc_on");return!1}function lf(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var f=l(a.currentTarget);a=f.attr("class");f=f.find("i");"player_toggleControl"==a?kc?f.removeClass("ap_pause_on").addClass("ap_pause"): f.removeClass("ap_play_on").addClass("ap_play"):"player_volume"==a?0==E?f.removeClass("ap_mute_on").addClass("ap_mute"):f.removeClass("ap_vol_on").addClass("ap_vol"):"playlist_toggle"==a?f.removeClass("ap_pl_tog_on").addClass("ap_pl_tog"):"info_toggle"==a?f.removeClass("ap_pl_info_on").addClass("ap_pl_info"):"ap_share_btn"==a?f.removeClass("ap_pl_share_on").addClass("ap_pl_share"):"player_fullscreen"==a?"normal"==ea?f.removeClass("ap_fs_ent_on").addClass("ap_fs_ent"):f.removeClass("ap_fs_exit_on").addClass("ap_fs_exit"): "caption_btn"==a&&(f.removeClass("ap_cc_on").addClass("ap_cc"),!isMobile&&lc&&(M&&clearTimeout(M),M=setTimeout(Pb,Vc)));return!1}function Uc(){r&&(Ua(),z.advanceHandler(1,!0))}function fe(){r&&s&&(s&&pd(),Ua(),z.reSetCounter())}function od(){s&&pd();var a=l(J[z.getCounter()]);s=a.attr("data-type");Ya=a.attr("data-mp4Path");Gd=a.attr("data-mp4Path");za&&a.find("div[class=track_list]").length&&(oa=!0);if("local"==s)ob?F?re():"undefined"!==typeof y(D)&&(y(D).pb_play(Gd,Aa,na.width(),na.height(),"local", !0),O=!0):(mf(),Ja());else if("youtube_single"==s||"youtube_playlist"==s)F?nf():"undefined"!==typeof y(D)&&(y(D).pb_play(Ya,Aa,na.width(),na.height(),"youtube",Hd),ob&&(O=!0));"wall"==q||isMobile||itemTriggered(z.getCounter())}function pd(){Za&&clearInterval(Za);Wc();of();if(s&&"local"==s)if(F){if(t){t.pause();try{t.currentTime=0}catch(a){}t.src=""}Ba&&Ba.unbind("ended",Id).unbind("loadedmetadata",se).unbind("waiting",te).unbind("playing",ue).unbind("play",mc).unbind("pause",Xc);Ga.css("display", "none");!isMobile&F?(Ga.html(""),Cb=!1):za&&Ba&&Ba.removeAttr("id").removeClass("captioned")}else"undefined"!==typeof y(D)&&y(D).pb_dispose();else if(s&&"youtube_single"==s||s&&"youtube_playlist"==s)F?(G&&G.stop(),dc.css("left","-10000px")):"undefined"!==typeof y(D)&&y(D).pb_dispose();pa.length&&pb("off");Y&&(Y.remove(),Y=null);Yc.css("display","none");nc.find("p").html("00:00");oc.find("p").html("00:00");Sb.width(0);Zc.width(0);O=kc=!1;za&&(captionator.destroy(),pc&&pc.remove(),Jd.css("display", "none"));qc();oa=!1;Ca=Da=null}function pb(a){pa.css("left","0px");"off"==a?(pa.css("opacity",0),isIE&&ieBelow9&&pa.css("display","none")):(pa.css("opacity",1),pa.css("display","block"))}function nf(){ve?(qb(),G.initVideo(Ya)):(G=l.youtubePlayer({autoPlay:Hd,defaultVolume:E,mediaPath:Ya,youtubeHolder:dc,youtubeChromeless:pf,isMobile:isMobile,initialAutoplay:Kd,quality:qf}),l(G).bind("ap_YoutubePlayer.YT_READY",function(){qb();pa.css("left","-10000px")}),l(G).bind("ap_YoutubePlayer.START_PLAY",function(){O= !0;qb();Ld();Ja();Za&&clearInterval(Za);Za=setInterval(we,xe);pb("on")}),l(G).bind("ap_YoutubePlayer.END_PLAY",function(){Id()}),l(G).bind("ap_YoutubePlayer.STATE_PLAYING",function(){mc()}),l(G).bind("ap_YoutubePlayer.STATE_PAUSED",function(){Xc()}),l(G).bind("ap_YoutubePlayer.STATE_CUED",function(){ba.length&&ba.css("display","none")}),ve=!0);ba.length&&setTimeout(function(){ba.css("display","none")},1E3);Ja()}function ff(){if(isIE){I&&(l(I).unbind("ap_YoutubePlayer.YT_READY").unbind("ap_YoutubePlayer.START_PLAY").unbind("ap_YoutubePlayer.END_PLAY"), I=null);var a={autoPlay:!0,defaultVolume:0,mediaPath:Ya,youtubeHolder:ia,youtubeChromeless:!0,isMobile:isMobile,initialAutoplay:Kd,quality:"small",small_embed:!0,isIE:isIE};I=l.youtubePlayer(a);l(I).bind("ap_YoutubePlayer.YT_READY",function(){});l(I).bind("ap_YoutubePlayer.START_PLAY",function(){ta&&ta.css("display","none");-1==W?(I.stopPreview(),da()):(ia.css({width:Ib+"px",height:Jb+"px",left:"0px"}),"wall"!=q?(N&&clearInterval(N),N=setInterval(gc,jc)):Bb=!0,setTimeout(function(){ia.css("opacity", 1)},100))});l(I).bind("ap_YoutubePlayer.END_PLAY",function(){-1==W?(I.stopPreview(),da()):I.play()});Md=!0}else Md?I.initVideo(Ya):(a={autoPlay:!0,defaultVolume:0,mediaPath:Ya,youtubeHolder:ia,youtubeChromeless:!0,isMobile:isMobile,initialAutoplay:Kd,quality:"small",small_embed:!0,isIE:isIE},I=l.youtubePlayer(a),l(I).bind("ap_YoutubePlayer.YT_READY",function(){}),l(I).bind("ap_YoutubePlayer.START_PLAY",function(){ta&&ta.css("display","none");-1==W?(I.stopPreview(),da()):("wall"!=q?(N&&clearInterval(N), N=setInterval(gc,jc)):Bb=!0,setTimeout(function(){ia.css("opacity",1)},100))}),l(I).bind("ap_YoutubePlayer.END_PLAY",function(){-1==W?(I.stopPreview(),da()):I.play()}),Md=!0)}function mf(){Yc.css("display","block");ba.length&&ba.css("display","block");var a=l(J[z.getCounter()]).attr("data-imagePath")+"?rand="+99999999*Math.random();Y=l(new Image).css({position:"absolute",display:"block",opacity:0}).appendTo(Yc).load(function(){ba.length&&ba.css("display","none");Nd=this.width;Od=this.height;Ca=this.width; Da=this.height;Pd(Y);Y.animate({opacity:1},{duration:500,easing:"easeOutSine"});pa.length&&pb("on")}).error(function(a){}).attr("src",a)}function re(){var a=l(J[z.getCounter()]),f=!1;if(Lb)Qb=a.attr("data-mp4Path");else if(!Rc&&zd&&void 0!=a.attr("data-ogvPath"))Qb=a.attr("data-ogvPath"),f=!0;else if(Rc&&Ad&&void 0!=a.attr("data-webmPath"))Qb=a.attr("data-webmPath");else return alert("No supported video format found. Quitting."),!1;if(Cb)Ga.css("display","block"),oa&&Ba.append(l.parseHTML(ye(a))), t.src=Qb,t.load();else{var g;g=""+('<video class="video_cont" width="'+Ca+'" height="'+Da+'">');g+='<source src="'+Qb+'" />';g+="</video>";if(!isAndroid){var f=Lb?'type="video/mp4"':f?'type="video/ogg"':'type="video/webm"',k=g.match(/\/\>/);g=g.slice(0,k.index)+f+g.slice(k.index)}oa&&(k=g.match(/\<\/video\>/),g=g.slice(0,k.index)+ye(a)+g.slice(k.index));Ga.css("display","block").html(g);Ba=Ga.find(".video_cont");t=Ba[0]}t.volume=E;Ba.css("position","absolute").bind("ended",Id).bind("loadedmetadata", se).bind("waiting",te).bind("playing",ue).bind("play",mc).bind("pause",Xc);isIOS&&!Cb?(t.src=Qb,t.load()):isAndroid&&!Cb&&(t.play(),pa.length&&pb("off"),Y&&Y.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Y.remove();Y=null}}),O=!0,Ja());Cb=!0;za&&oa&&(Yc.css("display","block"),a=0!=T("h")?T("h"):$a(),captionator.captionify(".video_cont",null,{controlHeight:rf+"px",appendCueCanvasTo:".mediaPreview"},a),captionator.setRedraw(!0))}function te(a){ba.length&&ba.css("display", "block")}function ue(a){ba.length&&ba.css("display","none")}function mc(a){Qd.find("i").removeClass("fa-play ap_play ap_play_on").addClass("fa-pause ap_pause");pa.length&&pb("off");kc=!0}function Xc(a){Qd.find("i").removeClass("fa-pause ap_pause ap_pause_on").addClass("fa-play ap_play");pa.length&&pb("on");kc=!1}function se(a){t.videoWidth&&(Ca=t.videoWidth);t.videoHeight&&(Da=t.videoHeight);qb();Za&&clearInterval(Za);Za=setInterval(we,xe);t.play();O=!0;Ld();ob=!0;Ja();oa&&(Ga.find("track").remove(), Jd.css("display","block"),qc())}function Nb(){if(-1==z.getCounter())return!1;if("local"==s)O||ob?F?t.paused?t.play():t.pause():"undefined"!==typeof y(D)&&y(D).pb_togglePlayback():(Y&&Y.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Y.remove();Y=null}}),F?re():"undefined"!==typeof y(D)&&y(D).pb_play(Gd,Aa,na.width(),na.height(),"local",!0));else if("youtube_single"==s||"youtube_playlist"==s)F?G&&G.togglePlayback():("undefined"!==typeof y(D)&&y(D).pb_togglePlayback(), O=!0);O=!0;return!1}function we(){if("local"==s){if(F&&(nc.find("p").html(wc(t.currentTime)),oc.find("p").html(xc(t.duration)),!db)){Sb.width(t.currentTime/t.duration*ca);try{var a=Math.floor(t.buffered.end(0))}catch(f){}isNaN(a)||(a/=Math.floor(t.duration),isNaN(a)||Zc.width(a*ca))}}else"youtube_single"!=s&&"youtube_playlist"!=s||!F||(nc.find("p").html(wc(G.getCurrentTime())),oc.find("p").html(xc(G.getDuration())),G&&!db&&(Sb.width(G.getCurrentTime()/G.getDuration()*ca),a=G.getVideoBytesLoaded()/ G.getVideoBytesTotal(),Zc.width(a*ca)))}function Id(){if(sf)Uc();else if("local"==s){try{t.currentTime=0}catch(a){}t.paused&&t.play();ob||t.pause()}else if("youtube_single"==s||"youtube_playlist"==s)ob?G.play():pa.length&&pb("off")}function jf(){M&&clearTimeout(M);lc?Ma.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Ma.css("display","none")}}):Ma.css({display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine",complete:function(){}});lc=!lc}function Pb(){M&& clearTimeout(M);Ma.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Ma.css("display","none")}});lc=!1}function ye(a){var f="",g,k=l("<div>"),m,p,n,q=!1;pc=l("<ul class='captions_menu'></ul>").appendTo(Ma);a.find("div[class=track_list]").children().each(function(){n=l(this);m=l("<li/>").appendTo(pc);p=l('<a href="#"/>').text(n.attr("data-label")).addClass("captionOut").attr("data-srclang",n.attr("data-srclang")).bind("click",ze).appendTo(m);isMobile||p.bind("mouseover", Ae).bind("mouseout",Be);n.attr("data-default")&&(q=!0,rc=p.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor","default"));g=k.empty().append(n.clone()).html();g=g.replace(/\<div/g,"<track").replace(/\<\/div\>/g,"</track>").replace(/data\-/g,"");f+=g});m=l("<li/>").appendTo(pc);p=l('<a href="#"/>').text("None").addClass("captionOut").attr("data-srclang","none").bind("click",ze).appendTo(m);q||(rc=p.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor", "default"));isMobile||p.bind("mouseover",Ae).bind("mouseout",Be);Ma.css("top",-Ma.height()-5+"px");return f}function ze(){var a=l(this);if(!0==a.data("active"))return!1;rc&&rc.removeClass("captionOver").addClass("captionOut").data("active",!1).css("cursor","pointer");rc=a.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor","default");var f=t.textTracksNew,a=a.attr("data-srclang"),g=0,k=f.length;if("none"==a)for(g;g<k;g++)f[g].mode=0;else for(g;g<k;g++)f[g].mode=f[g].language== a?2:0;isMobile&&(M&&clearTimeout(M),M=setTimeout(Pb,Vc));return!1}function Ae(){M&&clearTimeout(M);l(this).removeClass("captionOut").addClass("captionOver");return!1}function Be(){M&&clearTimeout(M);M=setTimeout(Pb,Vc);var a=l(this);!0!=a.data("active")&&a.removeClass("captionOver").addClass("captionOut");return!1}function Ye(){void 0!=y(D).setData&&(kb&&clearInterval(kb),y(D).setData(v),U&&"undefined"!==typeof y(ma)?(l(ma).css("display","block"),kb=setInterval(ke,rd)):ga())}function ke(){void 0!= y(ma).setData&&(kb&&clearInterval(kb),y(ma).setData(v),Kb.css({left:"-10000px",width:Ib+"px",height:Jb+"px"}),ga())}function y(a){"#"==a.charAt(0)&&(a=a.substr(1));return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function Ld(){if(0!=m.find(".infoHolder").length){var a=z.getCounter();void 0==ib[a]||la(ib[a])||(tf.html(ib[a]),Rd.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),uf&&Ed())}}function of(){0!=m.find(".infoHolder").length&& (Na.css("display","none"),Rd.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Rd.css("display","none")}}),jb=!1)}function Ed(){0!=m.find(".infoHolder").length&&(jb?(Na.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Na.css("display","none")}}),jb=!1):(Na.css({opacity:0,display:"block"}),rb?(rb.reinitialise(),rb.scrollToY(0)):(rb=Na.jScrollPane().data().jsp,Na.bind("jsp-initialised",function(a,f){}),Na.jScrollPane({verticalDragMinHeight:100, verticalDragMaxHeight:100})),Na.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),jb=!0))}function Ce(){rb&&(rb.reinitialise(),rb.scrollToY(0))}function Ze(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();Ja();return!1}function $e(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();le&&"fullscreen"!=ea&&Wc();U&&(I&&I.stopPreview(),da(),"list"==q&&-1!=X&&X!=z.getCounter()&& l(J[X])&&l(J[X]).removeClass("playlistSelected").addClass("playlistNonSelected"));return!1}function af(a){if(!r||u)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();U&&(I&&I.stopPreview(),da(),"list"==q&&-1!=X&&X!=z.getCounter()&&l(J[X])&&l(J[X]).removeClass("playlistSelected").addClass("playlistNonSelected"));return!1}function Ja(){if("wall"==q)return!1;$c.css("display","block");if(!O)return!1;sb.css("display","block");qc()}function td(){if("wall"== q)return!1;$c.css("display","block");if(!O)return!1;sb.css("display","block")}function Wc(){if("wall"==q)return!1;$c.css("display","none");sb.css("display","none")}function sd(){De();"fullscreen"==ea?Tc():"local"==s?O?F&&qb():Pd(Y):"youtube_single"!=s&&"youtube_playlist"!=s||qb();qc();jb&&Ce();if(za&&oa){var a=0!=T("h")?T("h"):$a();captionator.setHeight(a);captionator.setRedraw(!1)}}function De(){if(!Oc&&"list"==q){var a=0!=m.width()?m.width():sc(),f=0!=m.height()?m.height():$a(),g=ec.width(),k=R.width(); "vertical"==P&&("fullscreen"!=ea?isiPhoneIpod?R.css({position:"relative",left:"0px",height:"250px","float":"right",clear:"both"}):a<g+k?R.css({position:"absolute",left:g-k+"px",height:f-sb.height()+"px"}):R.css({position:"absolute",left:g+"px",height:f+"px"}):R.css({position:"fixed",left:a-k+"px",height:f-sb.height()+"px"}));"horizontal"==P&&("fullscreen"==ea?R.css("width",a+"px"):R.css("width","100%"));a=B=0;for(a;a<p;a++)f=l(J[a]),B="horizontal"==P?B+f.outerWidth(!0):B+f.outerHeight(!0);"buttons"== Ta?("horizontal"==P?(H.css("left","0px"),yb.width(B)):H.css("top","0px"),ce()):"scroll"==Ta&&("horizontal"==P&&ac.width(B),hd())}}function Tc(){Z&&clearTimeout(Z);fa.unbind("mousemove",ad);"fullscreen"==ea?(Sd.css("overflow","hidden"),"list"==q&&ec.removeClass("playerHolder").addClass("playerHolder_fs"),m.find(".player_adv").removeClass("player_adv").addClass("player_adv_fs"),isMobile?Z=setTimeout(function(){clearTimeout(Z);Td()},tc):(fa.unbind("mousemove",ad).bind("mousemove",ad),Z=setTimeout(function(){clearTimeout(Z); ad()},tc)),vf&&(lb("off"),Ob=mb),m.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-compress ap_fs_exit")):(Sd.css("overflow",wf),"list"==q&&ec.removeClass("playerHolder_fs").addClass("playerHolder"),m.find(".player_adv_fs").removeClass("player_adv_fs").addClass("player_adv"),m.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-expand ap_fs_ent"));Y&&Pd(Y);F&&qb();jb&&Ce();qc();Ja();De();za&&oa&&(uc&&clearTimeout(uc),uc=setTimeout(xf,yf))}function xf(){uc&&clearTimeout(uc); var a=0!=T("h")?T("h"):$a();captionator.setHeight(a)}function ad(a){if(!O)return!1;Z&&clearTimeout(Z);a&&(Ee!=a.clientX&&(td(),Ob&&lb("on")),Ee=a.clientX);Z=setTimeout(function(){Wc();Ob=mb;lb("off")},tc)}function Td(){Z&&clearTimeout(Z);Wc();Ob=mb;lb("off");Z=setTimeout(function(){clearTimeout(Z);Td()},tc)}function qc(){var a="block"==nc.css("display")?zf:0;b="block"==oc.css("display")?Af:0;c="block"==Ud.css("display")?Bf:0;d="block"==Cf.css("display")?Df:0;e="block"==Jd.css("display")?Ef:0;Fe&& (d=0);Ge=Ff+a+b+c+d+e;He=sb.width();ca=He-Ge-Ie;eb.width(ca+Ie-1);ed.width(ca)}function Pd(a){if(!a)return!1;var f,g,k;g=0!=T("w")?T("w"):sc();k=0!=T("h")?T("h"):$a();0==Aa?f=Vd():1==Aa?f=bd(!0,a,Nd,Od):2==Aa&&(f=bd(!1,a,Nd,Od));g=parseInt((g-f.width)/2,10);k=parseInt((k-f.height)/2,10);a.css({width:f.width+"px",height:f.height+"px",left:g+"px",top:k+"px"})}function qb(){if(-1==z.getCounter())return!1;var a,f,g;f=0!=T("w")?T("w"):sc();g=0!=T("h")?T("h"):$a();0==Aa?a=Vd():1==Aa?a=bd(!0):2==Aa&&(a= bd(!1));f=parseInt((f-a.width)/2,10);g=parseInt((g-a.height)/2,10);"local"==s?Ba&&Ba.css({width:a.width+"px",height:a.height+"px",left:f+"px",top:g+"px"}):("youtube_single"==s||"youtube_playlist"==s)&&dc&&dc.css({width:a.width+"px",height:a.height+"px",left:f+"px",top:g+"px"})}function bd(a,f,g,k){var l=0!=T("w")?T("w"):sc(),m=0!=T("h")?T("h"):$a(),n={};f?"undefined"!==typeof g&&"undefined"!==typeof k?f=k:(g=f.width(),f=f.height()):(f=Vd(),g=f.width,f=f.height);k=(l-0)/(m-0);var p=g/f;p<k?a?(n.width= (m-0)/f*g,n.height=m-0):(n.height=(l-0)/g*f,n.width=l-0):p>k?a?(n.height=(l-0)/g*f,n.width=l-0):(n.width=(m-0)/f*g,n.height=m-0):(n.width=l-0,n.height=m-0);return n}function Vd(){var a={};if("local"==s)!Ca||isNaN(Ca)||!Da||isNaN(Da)?t?(a.width=t.videoWidth,a.height=t.videoHeight):(a.width=640,a.height=360):(a.width=Ca,a.height=Da);else if("youtube_single"==s||"youtube_playlist"==s)!Ca||isNaN(Ca)||!Da||isNaN(Da)?(a.width=640,a.height=360):(a.width=Ca,a.height=Da);return a}function T(a){return"w"== a?"normal"==ea?na.width():sc():"normal"==ea?na.height():$a()}function sc(){return Math.max(cd.width(),document.documentElement.clientWidth)}function $a(){return Math.max(cd.height(),document.documentElement.clientHeight)}function qe(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?m.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-expand ap_fs_ent"):m.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-compress ap_fs_exit")} function la(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function wc(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function xc(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}var r=!1,Sd=l("body"),cd=l(window),fa=l(document),df=window.location.href,zb="",ub="",Ra="",Ea,wb=!0;"ontouchstart"in window?(Ea=!0,zb="touchstart.ap", ub="touchmove.ap",Ra="touchend.ap"):(Ea=!1,zb="mousedown.ap",ub="mousemove.ap",Ra="mouseup.ap");var Ee=0,Lb=function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))}(),zd=function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""))}(),Ad=function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/, ""))}(),F=!!document.createElement("video").canPlayType,ne=hap_source_path+v.buttonsUrl.thumbnailPreloaderUrl,m=l(this),na=m.find(".componentWrapper"),A=m.find(".componentPlaylist");m.find(".innerWrapper");var q=v.playlistType,yb="list"==q?m.find(".playlist_inner"):na.find(".playlist_inner"),ge=m.find(".playlist_content"),R=m.find(".playlistHolder"),Va=m.find(".playlist_list"),ec=m.find(".playerHolder"),nc=m.find(".player_mediaTime_current"),oc=m.find(".player_mediaTime_total"),sb=m.find(".playerControls"), Qd=m.find(".player_toggleControl"),eb=m.find(".player_seekbar"),ed=m.find(".progress_bg"),Zc=m.find(".load_level"),Sb=m.find(".progress_level"),va=m.find(".volume_seekbar").css("zIndex",300),fd=m.find(".volume_bg"),ae=m.find(".volume_level"),Cf=m.find(".player_fullscreen"),Jd=m.find(".player_captions"),Ma=m.find(".caption_holder").css("zIndex",301);isMobile||Ma.bind("mouseenter",function(){if(!r||u)return!1;M&&clearTimeout(M);return!1}).bind("mouseleave",function(){if(!r||u)return!1;M&&clearTimeout(M); M=setTimeout(Pb,Vc);return!1});na.find(".caption_btn");var D=v.flashMain,dc=m.find(".youtubeIframeMain"),ma=v.flashPreview,Kb=m.find("#flashPreviewHolder"),ia=m.find(".youtubeIframePreview").bind("click",function(a){Nb();return!1});ia.css({left:-ia.width()+5+"px"}).bind("click",function(){return!1});var ha,ec=m.find(".playerHolder"),Ga=m.find(".mediaHolder").bind("click",function(){if(!r||u)return!1;Nb();return!1}),Yc=m.find(".mediaPreview").bind("click",function(){if(!r||u)return!1;Nb();return!1}), $c=m.find(".player_addon");m.find(".playlist_toggle");m.find(".ap_share_btn");var hf=m.find(".ap_share_holder"),Rd=m.find(".info_toggle"),Na=m.find(".infoHolder"),Ud=m.find(".player_volume"),pa=m.find(".big_play").css("cursor","pointer").bind("click",function(){if(!r||u)return!1;Nb();return!1}),tf=m.find(".info_inner"),ba=m.find(".preloader");m.find(".playlistControls");var id,Nd,Od,Ka="/main/",Xa=v.previewPath,bf=v.wallPath,U=isMobile?!1:v.useLivePreview;U||(m.find(".youtubeIframePreview").remove(), Kb.remove());var ob=v.autoPlay,Hd=v.autoPlay,Kd=v.autoPlay;isMobile&&(Hd=ob=!1);var sf=v.autoAdvanceToNextVideo,le=isMobile?!1:v.autoHideControls,rf=v.captionsBottomPadding,uf=v.autoOpenDescription,P=v.playlistOrientation,Ta=v.scrollType,Gf=v.randomPlay,Hf=v.loopingOn,Pc=v.autoMakePlaylistThumb,me=v.autoMakePlaylistInfo,Rc=v.useWebmVideoFormat,Aa=v.aspectRatio,Je=v.layout100perc,Oc=v.playlistHidden,qf=v.useYoutubeHighestQuality,vf=v.closePlaylistOnFsEntry;Oc&&(R.css("display","none"),m.find(".playlist_toggle").remove()); "wall"==q&&(Oc=!1,Pc=!0,$b=-1);isMobile&&(Aa=1);isiPhoneIpod&&(Na.remove(),sb.remove(),$c.remove());var Fb,Jc=[],Ia,Eb,ib=[],Kc=[],cc=[],qd,bc,aa,u=!1,Gc=!1,Mb=!1,Cb=!1,nb,ic,ac,ya,W=-1,X=-1,mb="block"==R.css("display")?!0:!1,Ob=mb,ja=[],S,Bb=!1,Gb,Hb,Mc,Nc,sa,je,ra,Bd,ta,hc,Fd=0,Sc=!1,Fe;if(function(){var a=!1;document.documentElement.requestFullscreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0);document.fullscreenElement||document.mozFullScreenElement|| document.webkitFullscreenElement||(document.documentElement.requestFullscreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullscreen&&(a=!0));return a}())Sc=!0;else if(isIE&&Je||isMobile&&Je)Fe=!0,m.find(".player_fullscreen").remove();isIOS&&m.find(".player_volume_wrapper").remove();var Ff=m.find(".player_toggleControl").outerWidth(!0),zf=m.find(".player_mediaTime_current").outerWidth(!0),Af=m.find(".player_mediaTime_total").outerWidth(!0),Bf=m.find(".player_volume_wrapper").outerWidth(!0), Df=m.find(".player_fullscreen").outerWidth(!0),Ef=m.find(".player_captions").outerWidth(!0),G,I,hb=[],fc,cf=50,wd,ve=!1,Md=!1,pf=!0,Y,za=v.useCaptions,oa=!1,yf=100,uc,rc,Vc=2E3,M,lc=!1,pc,O=!1,Qb,Gd,La,Ya,kc=!1,Ib,Jb,jc=100,N,rd=100,kb,ie=!1,tc=v.controlsTimeout,Z,xe=10,Za,Ha=[],Db=[],ka=[],Hc=[],Ic=[],J=[],p=0,Ca,Da,s,ea="normal",Ba,t,jb=!1,wf=Sd.css("overflow"),rb,Xb,xb,Vb,Wb,K,Ab=50,B,H;"wall"!=q&&"buttons"==Ta&&(H=yb,Ea&&Qe());var Ke=[Qd,m.find(".playlist_toggle"),m.find(".ap_share_btn"),m.find(".info_toggle"), m.find(".player_volume"),m.find(".player_fullscreen"),m.find(".caption_btn"),m.find(".player_prev"),m.find(".player_next")],Le,If=Ke.length,dd=0;for(dd;dd<If;dd++)Le=l(Ke[dd]).css("cursor","pointer").bind("click",gf),isMobile||Le.bind("mouseenter",kf).bind("mouseleave",lf);var db=!1,Ge,He,ca,Ie=30;eb.css("cursor","pointer").bind(zb,function(a){Me(a);return!1});if(!isMobile){var Tb=m.find(".player_progress_tooltip").css({left:parseInt(eb.css("left"),10)+"px",zIndex:302});eb.bind("mouseover",Ne)}var Bc= !0,E=v.defaultVolume,Ac;0>E&&(E=0);0==E?Ac=0.5:1<E&&(E=1);0!=E&&(Ac=E);var Rb=!1,vb=fd.height();ae.css("height",E*vb+"px");var Ub=!1,L,Cc=3E3;isMobile?Ud.bind("click",function(){if(!r)return!1;L&&clearTimeout(L);za&&oa&&Pb();return!1}):Ud.bind("mouseover",function(){if(!r)return!1;L&&clearTimeout(L);va.css("display","block");Ub=!0;za&&oa&&Pb();return!1}).bind("mouseout",function(){if(!r)return!1;L&&clearTimeout(L);L=setTimeout(yc,Cc);return!1});0==E&&m.find(".player_volume").find("i").removeClass("fa-volume-up ap_vol_on ap_vol").addClass("fa-volume-off ap_mute"); va.css("cursor","pointer").bind(zb,function(a){Oe(a);return!1});if(!isMobile){va.bind("mouseover",gd);var Sa=na.find(".player_volume_tooltip"),Pe=parseInt(Sa.css("top"),10);Sa.bind("mouseenter",function(){va.unbind("mouseover",gd);Sa.css("display","none")}).bind("mouseleave",function(){va.bind("mouseover",gd)})}F||(Lb=!0);var z=l.playlistManager({randomPlay:Gf,loopingOn:Hf});l(z).bind("ap_PlaylistManager.COUNTER_READY",function(){V?fb?(fb=!1,Fc(),od()):(l.address.value(Ve(z.getCounter())),l.address.history()|| l.address.history(!0)):(Fc(),od())});l(z).bind("ap_PlaylistManager.PLAYLIST_END",function(){Fc();videoGalleryPlaylistEnd()});var xa=[],Wd;Va.children("div[data-address]").each(function(){var a={};Wd=l(this);a.categoryName=Wd.attr("data-address");a.id=Wd.attr("id");xa.push(a)});var Lc=!1,Ue=xa.length,V="wall"==q?!1:v.useDeeplink;if(V){var ef=l.address.strict()?"#/":"#",xd,ld=!1,Zb,md,wa,fb=!1,kd=!1,Fa,jd,tb=v.activePlaylist;la(tb)||la(v.activeItem)||(tb+="/"+v.activeItem);var qa,nd,$b,Yb;l.address.internalChange(function(a){a.stopPropagation(); Ec(a)});l.address.externalChange(function(a){a.stopPropagation();jd=a;u?(Fa&&clearTimeout(Fa),Yb&&clearInterval(Yb),Yb=setInterval(Se,100)):kd?(Fa&&clearTimeout(Fa),Fa=setTimeout(Te,500)):"/"==a.value?(fb=!0,l.address.history(!1),la(tb)||(l.address.value(tb),l.address.history()||l.address.history(!0))):la(a.value)?(fb=!0,l.address.history(!1),la(tb)||(l.address.value(tb),l.address.history()||l.address.history(!0))):Ec(a)})}else aa=v.activePlaylist,gb();this.flashPreviewVideoStart2=function(){ta&& ta.css("display","none")};this.flashPreviewVideoStart=function(){N&&clearInterval(N);N=setInterval(gc,jc)};this.flashVideoPause=function(){Xc()};this.flashVideoResume=function(){mc()};this.flashVideoEnd=function(){Uc()};this.flashVideoStart=function(){O=!0;mc();Ja();Ld()};this.dataUpdateFlash=function(a,f,g,k){Zc.width(a/f*ca);Sb.width(g/k*ca);nc.html(wc(g));oc.html(xc(k))};"wall"!=q&&cd.resize(function(){if(!r||u)return!1;sd()});isMobile&&cd.doubletap(function(){setTimeout(function(){clearTimeout(l(this)); sd()},1E3)});isMobile&&fa.bind("touchend.ap2",function(a){"fullscreen"==ea&&(Z&&clearTimeout(Z),td(),Ob&&lb("on"),Z=setTimeout(function(){clearTimeout(Z);Td()},tc))});if("wall"!=q&&Sc)fa.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){qe();"fullscreen"==ea&&0<Fd&&(ea="normal",Tc());Fd=1;za&&oa&&captionator.setRedraw(!1)});this.getVolume=function(){return!r||u?!1:E};this.togglePlayback=function(){if(!r||u||"wall"==q||!s)return!1;Nb()};this.nextMedia=function(){if(!r||u|| "wall"==q)return!1;Uc()};this.previousMedia=function(){if(!r||u||"wall"==q)return!1;r&&(Ua(),z.advanceHandler(-1,!0))};this.setVolume=function(a){if(!r||u||"wall"==q||!O)return!1;0>a?a=0:1<a&&(a=1);E=a;zc()};this.destroyMedia=function(){if(!r||u||"wall"==q)return!1;fe()};this.togglePlaylist=function(a){if(!r||u||"wall"==q)return!1;lb(a)};this.toggleDescription=function(){if(!r||u||"wall"==q||-1==z.getCounter())return!1;Ed()};this.loadMedia=function(a){if(!r||u)return!1;if("wall"!=q)if(V)if("string"=== typeof a)l.address.value(a);else return alert("Invalid value loadMedia Deeplink!"),!1;else if("number"===typeof a)0>a?a=0:a>p-1&&(a=p-1),Ua(),z.processPlaylistRequest(a);else if("string"===typeof a){if(aa==a)return!1;aa=a;gb()}else return alert("Invalid value loadMedia no Deeplink!"),!1;else if("string"===typeof a){if(aa==a)return!1;aa=a;gb()}else return alert("Invalid value loadMedia Wall Layout!"),!1};this.loadTrack=function(a){if(!r||u)return!1;if("wall"==q)return alert("loadTrack method is not available for wall layout! Quitting."), !1};this.cleanPreviewVideo=function(){if(!r||u||!U)return!1;da()};this.outputPlaylistData=function(){if(!r||u||!ac)return!1;try{console.log(Kc)}catch(a){}};return this}})(jQuery);